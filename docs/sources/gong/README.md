# Gong

## Gong Metrics

Connector for Gong user activity metrics and user data.

### Examples

- [Example Rules](gong-metrics/gong-metrics.yaml)
- Example Data:
  - [original/users.json](gong-metrics/example-api-responses/original/users.json) | [sanitized/users.json](gong-metrics/example-api-responses/sanitized/users.json)
  - [original/activity_aggregate.json](gong-metrics/example-api-responses/original/activity_aggregate.json) | [sanitized/activity_aggregate.json](gong-metrics/example-api-responses/sanitized/activity_aggregate.json)

### Setup

**Automated Setup (Recommended)**

Use the [guided script](../../../tools/gong-auth.sh) to automate the OAuth setup process:

```bash
./tools/gong-auth.sh
```

The script will guide you through:
1. Creating an OAuth app in Gong
2. Configuring the required scopes (`api:stats:user-actions`, `api:users:read`)
3. Obtaining access and refresh tokens
4. Providing the values to store in your secret manager

**Manual Setup**

See the [official Gong OAuth documentation](https://help.gong.io/docs/create-an-app-for-gong) or refer to the automated setup instructions generated by Terraform.

### Required Configuration

1. **Terraform Variables**: Set `gong_instance_name` in your `terraform.tfvars` file (e.g., if your Gong URL is `acme.gong.io`, set `gong_instance_name = "acme"`)

2. **Secret Manager Parameters**:
   - `PSOXY_GONG_METRICS_CLIENT_ID` - OAuth Client ID from Gong app
   - `PSOXY_GONG_METRICS_CLIENT_SECRET` - OAuth Client Secret from Gong app
   - `PSOXY_GONG_METRICS_ACCESS_TOKEN` - OAuth access token
   - `PSOXY_GONG_METRICS_REFRESH_TOKEN` - OAuth refresh token (for automatic token refresh)

### Required Scopes

- `api:stats:user-actions` - for retrieving user activity statistics
- `api:users:read` - for listing users and their details

### Authentication

This connector uses OAuth 2.0 Authorization Code flow with:
- HTTP Basic Authentication for token requests
- Automatic token refresh (tokens expire after 1 day by default)
- Customer-specific API base URL

NOTE: derived from [worklytics-connector-specs](../../../infra/modules/worklytics-connector-specs/main.tf); refer to that for definitive information.

