# ChatGPT

## **ALPHA** Compliance API

This API allows ChatGPT Enterprise administrators to observe and remove data from their ChatGPT Enterprise workspaces. It is intended for compliance, security, and data privacy use.  The get endpoints provide time-indexed access to ChatGPT Enterprise data.
Administrators can use it to retrieve this data for archival or Data Loss Prevention purposes as part of a compliance or security program.

This API is designed for regularly downloading data diffs to synchronize an offline database for data compliance, rather than mass export. The initial data sync will take longer, but subsequent syncs will be faster as only the diffs need to be downloaded.

Owners can generate an API key in the [OpenAI API Platform Portal](https://platform.openai.com/api-keys).
Note that the correct Organization must be selected when creating a key, corresponding to the  administered workspace.
Do not select the owner's personal organization.

 Remember the base url is `https://api.chatgpt.com/v1/` for all requests below.\n\n### Retention\nDeleted data is not recoverable. This API does not provide the capability for deleting any data\nlogged for audit or security within OpenAI. All authenticated requests to this API are logged\nfor security and compliance purposes. When an item is deleted using this API, it is also removed\nfrom all internal search and retrieval indexes.  Data is retained internally for no greater than\n30 days following a deletion request.\n\n#### **Messages**\nThere are several ways messages can be edited/deleted in ChatGPT:\n- Workspace setting: Admins can set a retention setting for the entire workspace (minimum 90d).\n  Messages will be deleted N days after the last edit to the conversation (N set by Admins)\n  on a going forward basis.\n- User delete conversation: These conversations will still be available via this API for up to 30d\n  but not visible to the user.\n- User edit/delete message: These conversations will be shown via the API in the conversation tree\n  subject to the retention settings above\n\n#### **Files**\nThere are 4 different file retentions within ChatGPT:\n- GPT & Project Files: Files uploaded to GPTs/Projects are retained indefinitely since new conversations require them.\n- Chat Uploaded Files: Files uploaded by users are held temporarily (48hrs)\n- Generated Files: Files generated by ChatGPT (ie DALLE) are held based on the workspace's\n  retention setting\n\n### File URL Expiration\nFile URLs are generated each time the Compliance API is polled.\n- Files can be downloaded from these URLs, and for security reasons, they have an expiry of 1 hour.\n- For direct requests to fetch file contents, the redirect contains an ephemeral download URL which expires after 5 minutes.\n- Thus, if files are needed for compliance purposes, messages should be polled regularly (before their retention setting) and then downloaded soon after polling before the URL expires.\n\n### Implementation Tips\nCoding tip:\n- You can download the OpenAI Compliance Spec as a JSON file from the top of this page.\n- Using the JSON Spec File, you can ask ChatGPT to generate some starter code for you‚Äîusing a reasoning model often yields the best results.\n- There are also various open source projects available (such as OpenAPI Gen, Swagger Autogen, and others) that have been developed by the community.\n- As always, we can't promise the accuracy of 3rd-party tools or auto-generated code, so always double-check the values returned are as expected üòÄ.\n\n```\n# You should probably autogen or get ChatGPT to help as mentioned above, but here's some examples.\n# üó®Ô∏è Curl (no pagination) Example for Projects\ncurl -H \"Authorization: Bearer {sk-proj-KEY-HERE}\" \"https://api.chatgpt.com/v1/compliance/workspaces/{INPUT_WORKSPACE_HERE}/projects\"\n\n# üó®Ô∏è Python Basic (no pagination) for Projects\nimport requests\nurl = \"https://api.chatgpt.com/v1/compliance/workspaces/{INPUT_WORKSPACE_HERE}/projects\"\nheaders = {\"Authorization\": f\"Bearer {sk-proj-KEY-HERE}\"}\nresponse = requests.get(url, headers=headers)\n# Add code to loop until has_more is false, using after to get the next page of projects\n# If 429/rate limit, slow down and try again.\n```\n\nCommon Mistakes:\n- Make sure to use \"has_more\" & \"after\"/\"since_timestamp\" or similar pagination logic to page through the list of items.\n- Make sure to use either `after` or `since_timestamp`. Including both parameters will result in an error.\n- If you hit the API too fast, you may get a 429 rate-limit error. Just slow down and try again.\n- Using `api.openai.com` instead of `api.chatgpt.com` can cause a 404 error.\n"
## Examples

- [Example Rules](compliance/chatgpt-compliance.yaml)
- Example Data : [compliance/original/conversations.json](compliance/example-api-responses/original/conversations.json) |
  [sanitized/conversations.json](compliance/example-api-responses/sanitized/conversations.json)

See more examples in the `docs/sources/chatgpt/compliance/example-api-responses` folder
of the [Psoxy repository](https://github.com/Worklytics/psoxy).
