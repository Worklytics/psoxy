---
endpoints:
  - pathTemplate: "/rest/api/{apiVersion}/search"
    allowedQueryParams:
      - "startAt"
      - "maxResults"
      - "jql"
      - "fields"
    transforms:
      - !<redact>
        jsonPaths:
          - "$.issues[*]..description"
          - "$.issues[*]..iconUrl"
          - "$.issues[*]..name"
          - "$.issues[*]..avatarUrls"
          - "$.issues[*]..displayName"
          - "$.issues[*]..name"
          - "$.issues[*]..body"
          - "$.issues[*]..comment"
          - "$..displayName"
      - !<pseudonymize>
        jsonPaths:
          - "$.issues[*]..key"
          - "$.issues[*]..emailAddress"
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      type: "object"
      properties:
        issues:
          type: "array"
          items:
            type: "object"
            properties:
              changelog:
                type: "object"
                properties:
                  histories:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        author:
                          type: "object"
                          properties:
                            accountType:
                              type: "string"
                            active:
                              type: "boolean"
                            emailAddress:
                              type: "string"
                            key:
                              type: "string"
                            timeZone:
                              type: "string"
                        created:
                          type: "string"
                        id:
                          type: "string"
                        items:
                          type: "array"
                          items:
                            type: "object"
                            properties:
                              field:
                                type: "string"
                              fieldtype:
                                type: "string"
              fields:
                type: "object"
                properties:
                  aggregateprogress:
                    type: "object"
                    properties:
                      progress:
                        type: "integer"
                      total:
                        type: "integer"
                  assignee:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
                  attachment:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        author:
                          type: "object"
                          properties:
                            accountType:
                              type: "string"
                            active:
                              type: "boolean"
                            emailAddress:
                              type: "string"
                            key:
                              type: "string"
                            timeZone:
                              type: "string"
                        created:
                          type: "string"
                        id:
                          type: "string"
                        size:
                          type: "integer"
                  comment:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        author:
                          type: "object"
                          properties:
                            accountType:
                              type: "string"
                            active:
                              type: "boolean"
                            emailAddress:
                              type: "string"
                            key:
                              type: "string"
                            timeZone:
                              type: "string"
                        created:
                          type: "string"
                        id:
                          type: "string"
                        updateAuthor:
                          type: "object"
                          properties:
                            accountType:
                              type: "string"
                            active:
                              type: "boolean"
                            emailAddress:
                              type: "string"
                            key:
                              type: "string"
                            timeZone:
                              type: "string"
                        updated:
                          type: "string"
                        visibility:
                          type: "object"
                          properties:
                            identifier:
                              type: "string"
                            type:
                              type: "string"
                            value:
                              type: "string"
                  created:
                    type: "string"
                  creator:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
                  duedate:
                    type: "string"
                  issuelinks:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        id:
                          type: "string"
                        inwardIssue:
                          type: "object"
                          properties:
                            id:
                              type: "string"
                        outwardIssue:
                          type: "object"
                          properties:
                            id:
                              type: "string"
                        type:
                          type: "object"
                          properties:
                            id:
                              type: "string"
                            inward:
                              type: "string"
                            outward:
                              type: "string"
                  issuetype:
                    type: "object"
                    properties:
                      hierarchyLevel:
                        type: "integer"
                      id:
                        type: "string"
                      subtask:
                        type: "boolean"
                  lastViewed:
                    type: "string"
                  parent:
                    type: "object"
                    properties:
                      fields:
                        type: "object"
                        properties:
                          issuetype:
                            type: "object"
                            properties:
                              hierarchyLevel:
                                type: "integer"
                              id:
                                type: "string"
                              subtask:
                                type: "boolean"
                          priority:
                            type: "object"
                            properties:
                              id:
                                type: "string"
                              name:
                                type: "string"
                          status:
                            type: "object"
                            properties:
                              id:
                                type: "string"
                              name:
                                type: "string"
                              statusCategory:
                                type: "object"
                                properties:
                                  colorName:
                                    type: "string"
                                  id:
                                    type: "integer"
                                  key:
                                    type: "string"
                                  name:
                                    type: "string"
                      id:
                        type: "string"
                  progress:
                    type: "object"
                    properties:
                      progress:
                        type: "integer"
                      total:
                        type: "integer"
                  project:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                      insight:
                        type: "object"
                        properties:
                          lastIssueUpdateTime:
                            type: "string"
                          totalIssueCount:
                            type: "integer"
                      projectCategory:
                        type: "object"
                        properties:
                          id:
                            type: "string"
                      projectTypeKey:
                        type: "string"
                      simplified:
                        type: "boolean"
                      style:
                        type: "string"
                  reporter:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
                  resolutiondate:
                    type: "string"
                  status:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                      name:
                        type: "string"
                      statusCategory:
                        type: "object"
                        properties:
                          colorName:
                            type: "string"
                          id:
                            type: "integer"
                          key:
                            type: "string"
                          name:
                            type: "string"
                  statuscategorychangedate:
                    type: "string"
                  sub-tasks:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        id:
                          type: "string"
                        inwardIssue:
                          type: "object"
                          properties:
                            id:
                              type: "string"
                        outwardIssue:
                          type: "object"
                          properties:
                            id:
                              type: "string"
                        type:
                          type: "object"
                          properties:
                            id:
                              type: "string"
                            inward:
                              type: "string"
                            outward:
                              type: "string"
                  timeTracking:
                    type: "object"
                    properties:
                      originalEstimate:
                        type: "string"
                      originalEstimateSeconds:
                        type: "integer"
                      remainingEstimate:
                        type: "string"
                      remainingEstimateSeconds:
                        type: "integer"
                      timeSpent:
                        type: "string"
                      timeSpentSeconds:
                        type: "integer"
                  timespent:
                    type: "integer"
                  updated:
                    type: "integer"
                  votes:
                    type: "object"
                    properties:
                      hasVoted:
                        type: "boolean"
                      votes:
                        type: "integer"
                  watches:
                    type: "object"
                    properties:
                      isWatching:
                        type: "boolean"
                      watchCount:
                        type: "integer"
                      watchers:
                        type: "array"
                        items:
                          type: "object"
                          properties:
                            accountType:
                              type: "string"
                            active:
                              type: "boolean"
                            emailAddress:
                              type: "string"
                            key:
                              type: "string"
                            timeZone:
                              type: "string"
                  worklog:
                    type: "object"
                    properties:
                      worklogs:
                        type: "array"
                        items:
                          type: "object"
                          properties:
                            author:
                              type: "object"
                              properties:
                                accountType:
                                  type: "string"
                                active:
                                  type: "boolean"
                                emailAddress:
                                  type: "string"
                                key:
                                  type: "string"
                                timeZone:
                                  type: "string"
                            created:
                              type: "string"
                            id:
                              type: "string"
                            issueId:
                              type: "string"
                            started:
                              type: "string"
                            timeSpent:
                              type: "string"
                            timeSpentSeconds:
                              type: "integer"
                            updateAuthor:
                              type: "object"
                              properties:
                                accountType:
                                  type: "string"
                                active:
                                  type: "boolean"
                                emailAddress:
                                  type: "string"
                                key:
                                  type: "string"
                                timeZone:
                                  type: "string"
                            updated:
                              type: "string"
                            visibility:
                              type: "object"
                              properties:
                                identifier:
                                  type: "string"
                                type:
                                  type: "string"
                                value:
                                  type: "string"
              id:
                type: "string"
              self:
                type: "string"
        maxResults:
          type: "integer"
        startAt:
          type: "integer"
        total:
          type: "integer"
  - pathTemplate: "/rest/api/{apiVersion}/issue/{issueId}/comment"
    allowedQueryParams:
      - "startAt"
      - "maxResults"
    transforms:
      - !<redact>
        jsonPaths:
          - "$.comments[*]..avatarUrls"
          - "$.comments[*].author..self"
          - "$.comments[*].updateAuthor..self"
          - "$.comments[*]..displayName"
          - "$.comments[*]..name"
          - "$.comments[*]..text"
          - "$.comments[*]..body"
          - "$.comments[*]..renderedBody"
      - !<pseudonymize>
        jsonPaths:
          - "$.comments[*]..key"
          - "$.comments[*]..emailAddress"
        encoding: "URL_SAFE_TOKEN"
  - pathTemplate: "/rest/api/{apiVersion}/issue/{issueId}/worklog"
    allowedQueryParams:
      - "startAt"
      - "maxResults"
    transforms:
      - !<redact>
        jsonPaths:
          - "$.worklogs[*]..avatarUrls"
          - "$.worklogs[*].author..self"
          - "$.worklogs[*].updateAuthor..self"
          - "$.worklogs[*]..displayName"
          - "$.worklogs[*]..name"
          - "$.worklogs[*]..comment"
          - "$.worklogs[*]..summary"
      - !<pseudonymize>
        jsonPaths:
          - "$.worklogs[*]..key"
          - "$.worklogs[*]..emailAddress"
        encoding: "URL_SAFE_TOKEN"
  - pathTemplate: "/rest/api/{apiVersion}/issue/{issueId}"
    allowedQueryParams:
      - "startAt"
      - "maxResults"
      - "expand"
      - "fields"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..self"
          - "$..description"
          - "$..iconUrl"
          - "$..name"
          - "$..avatarUrls"
          - "$..displayName"
          - "$..name"
          - "$..body"
          - "$..comment"
          - "$..displayName"
          - "$..from"
          - "$..to"
          - "$..fromString"
          - "$..toString"
          - "$..attachment[*]..filename"
          - "$..attachment[*]..content"
          - "$..summary"
      - !<pseudonymize>
        jsonPaths:
          - "$..author..key"
          - "$..author..emailAddress"
          - "$..creator..key"
          - "$..creator..emailAddress"
          - "$..reporter..key"
          - "$..reporter..emailAddress"
          - "$..updateAuthor..key"
          - "$..updateAuthor..emailAddress"
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      type: "object"
      properties:
        changelog:
          type: "object"
          properties:
            histories:
              type: "array"
              items:
                type: "object"
                properties:
                  author:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
                  created:
                    type: "string"
                  id:
                    type: "string"
                  items:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        field:
                          type: "string"
                        fieldtype:
                          type: "string"
        fields:
          type: "object"
          properties:
            aggregateprogress:
              type: "object"
              properties:
                progress:
                  type: "integer"
                total:
                  type: "integer"
            assignee:
              type: "object"
              properties:
                accountType:
                  type: "string"
                active:
                  type: "boolean"
                emailAddress:
                  type: "string"
                key:
                  type: "string"
                timeZone:
                  type: "string"
            attachment:
              type: "array"
              items:
                type: "object"
                properties:
                  author:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
                  created:
                    type: "string"
                  id:
                    type: "string"
                  size:
                    type: "integer"
            comment:
              type: "array"
              items:
                type: "object"
                properties:
                  author:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
                  created:
                    type: "string"
                  id:
                    type: "string"
                  updateAuthor:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
                  updated:
                    type: "string"
                  visibility:
                    type: "object"
                    properties:
                      identifier:
                        type: "string"
                      type:
                        type: "string"
                      value:
                        type: "string"
            created:
              type: "string"
            creator:
              type: "object"
              properties:
                accountType:
                  type: "string"
                active:
                  type: "boolean"
                emailAddress:
                  type: "string"
                key:
                  type: "string"
                timeZone:
                  type: "string"
            duedate:
              type: "string"
            issuelinks:
              type: "array"
              items:
                type: "object"
                properties:
                  id:
                    type: "string"
                  inwardIssue:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                  outwardIssue:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                  type:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                      inward:
                        type: "string"
                      outward:
                        type: "string"
            issuetype:
              type: "object"
              properties:
                hierarchyLevel:
                  type: "integer"
                id:
                  type: "string"
                subtask:
                  type: "boolean"
            lastViewed:
              type: "string"
            parent:
              type: "object"
              properties:
                fields:
                  type: "object"
                  properties:
                    issuetype:
                      type: "object"
                      properties:
                        hierarchyLevel:
                          type: "integer"
                        id:
                          type: "string"
                        subtask:
                          type: "boolean"
                    priority:
                      type: "object"
                      properties:
                        id:
                          type: "string"
                        name:
                          type: "string"
                    status:
                      type: "object"
                      properties:
                        id:
                          type: "string"
                        name:
                          type: "string"
                        statusCategory:
                          type: "object"
                          properties:
                            colorName:
                              type: "string"
                            id:
                              type: "integer"
                            key:
                              type: "string"
                            name:
                              type: "string"
                id:
                  type: "string"
            progress:
              type: "object"
              properties:
                progress:
                  type: "integer"
                total:
                  type: "integer"
            project:
              type: "object"
              properties:
                id:
                  type: "string"
                insight:
                  type: "object"
                  properties:
                    lastIssueUpdateTime:
                      type: "string"
                    totalIssueCount:
                      type: "integer"
                projectCategory:
                  type: "object"
                  properties:
                    id:
                      type: "string"
                projectTypeKey:
                  type: "string"
                simplified:
                  type: "boolean"
                style:
                  type: "string"
            reporter:
              type: "object"
              properties:
                accountType:
                  type: "string"
                active:
                  type: "boolean"
                emailAddress:
                  type: "string"
                key:
                  type: "string"
                timeZone:
                  type: "string"
            resolutiondate:
              type: "string"
            status:
              type: "object"
              properties:
                id:
                  type: "string"
                name:
                  type: "string"
                statusCategory:
                  type: "object"
                  properties:
                    colorName:
                      type: "string"
                    id:
                      type: "integer"
                    key:
                      type: "string"
                    name:
                      type: "string"
            statuscategorychangedate:
              type: "string"
            sub-tasks:
              type: "array"
              items:
                type: "object"
                properties:
                  id:
                    type: "string"
                  inwardIssue:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                  outwardIssue:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                  type:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                      inward:
                        type: "string"
                      outward:
                        type: "string"
            timeTracking:
              type: "object"
              properties:
                originalEstimate:
                  type: "string"
                originalEstimateSeconds:
                  type: "integer"
                remainingEstimate:
                  type: "string"
                remainingEstimateSeconds:
                  type: "integer"
                timeSpent:
                  type: "string"
                timeSpentSeconds:
                  type: "integer"
            timespent:
              type: "integer"
            updated:
              type: "integer"
            votes:
              type: "object"
              properties:
                hasVoted:
                  type: "boolean"
                votes:
                  type: "integer"
            watches:
              type: "object"
              properties:
                isWatching:
                  type: "boolean"
                watchCount:
                  type: "integer"
                watchers:
                  type: "array"
                  items:
                    type: "object"
                    properties:
                      accountType:
                        type: "string"
                      active:
                        type: "boolean"
                      emailAddress:
                        type: "string"
                      key:
                        type: "string"
                      timeZone:
                        type: "string"
            worklog:
              type: "object"
              properties:
                worklogs:
                  type: "array"
                  items:
                    type: "object"
                    properties:
                      author:
                        type: "object"
                        properties:
                          accountType:
                            type: "string"
                          active:
                            type: "boolean"
                          emailAddress:
                            type: "string"
                          key:
                            type: "string"
                          timeZone:
                            type: "string"
                      created:
                        type: "string"
                      id:
                        type: "string"
                      issueId:
                        type: "string"
                      started:
                        type: "string"
                      timeSpent:
                        type: "string"
                      timeSpentSeconds:
                        type: "integer"
                      updateAuthor:
                        type: "object"
                        properties:
                          accountType:
                            type: "string"
                          active:
                            type: "boolean"
                          emailAddress:
                            type: "string"
                          key:
                            type: "string"
                          timeZone:
                            type: "string"
                      updated:
                        type: "string"
                      visibility:
                        type: "object"
                        properties:
                          identifier:
                            type: "string"
                          type:
                            type: "string"
                          value:
                            type: "string"
        id:
          type: "string"
        self:
          type: "string"
  - pathTemplate: "/rest/api/{apiVersion}/project"
    allowedQueryParams:
      - "startAt"
      - "maxResults"
      - "expand"
      - "includeArchived"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..avatarUrls"
          - "$..self"
          - "$..displayName"
          - "$..leadUserName"
          - "$..description"
      - !<pseudonymize>
        jsonPaths:
          - "$..lead..key"
          - "$..lead..emailAddress"
          - "$..assignee..key"
          - "$..assignee..emailAddress"
          - "$..realAssignee..key"
          - "$..realAssignee..emailAddress"
          - "$..user..key"
          - "$..user..emailAddress"
        encoding: "URL_SAFE_TOKEN"
  - pathTemplate: "/rest/api/{apiVersion}/user/search"
    allowedQueryParams:
      - "startAt"
      - "maxResults"
      - "username"
      - "includeActive"
      - "includeInactive"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..self"
          - "$..avatarUrls"
          - "$..displayName"
          - "$..name"
          - "$..attachment[*]..filename"
          - "$..attachment[*]..content"
      - !<pseudonymize>
        jsonPaths:
          - "$..key"
          - "$..emailAddress"
        encoding: "URL_SAFE_TOKEN"
