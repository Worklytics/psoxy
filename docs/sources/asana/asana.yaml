---
endpoints:
  - pathTemplate: "/api/1.0/tasks"
    allowedQueryParams:
      - "limit"
      - "offset"
      - "opt_fields"
      - "project"
      - "completed_since"
      - "modified_since"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$.data[*].created_by.gid"
          - "$.data[*].completed_by.gid"
          - "$.data[*].hearts[*].user.gid"
          - "$.data[*].likes[*].user.gid"
          - "$.data[*].assignee.gid"
          - "$.data[*].custom_fields[*].created_by.gid"
          - "$.data[*].custom_fields[*].people_value[*].gid"
          - "$.data[*].followers[*].gid"
          - "$.data[*]..email"
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/Task"
        errors:
          items:
            $ref: "#/definitions/Error"
        nextPage:
          $ref: "#/definitions/NextPage"
  - pathTemplate: "/api/1.0/tasks/{taskId}"
    allowedQueryParams: []
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$.data.created_by.gid"
          - "$.data.completed_by.gid"
          - "$.data.hearts[*].user.gid"
          - "$.data.likes[*].user.gid"
          - "$.data.assignee.gid"
          - "$.data.custom_fields[*].created_by.gid"
          - "$.data.custom_fields[*].people_value[*].gid"
          - "$.data.followers[*].gid"
          - "$.data..email"
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      properties:
        data:
          $ref: "#/definitions/Task"
        errors:
          items:
            $ref: "#/definitions/Error"
  - pathTemplate: "/api/1.0/tasks/{taskId}/stories"
    allowedQueryParams:
      - "limit"
      - "offset"
      - "opt_fields"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$.data[*].created_by.gid"
          - "$.data[*].hearts[*].user.gid"
          - "$.data[*].likes[*].user.gid"
          - "$.data[*].source.gid"
          - "$.data[*].target.gid"
          - "$.data[*]..email"
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/Story"
        errors:
          items:
            $ref: "#/definitions/Error"
        nextPage:
          $ref: "#/definitions/NextPage"
  - pathTemplate: "/api/1.0/tasks/{taskId}/subtasks"
    allowedQueryParams:
      - "limit"
      - "offset"
      - "opt_fields"
      - "project"
      - "completed_since"
      - "modified_since"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$.data[*].created_by.gid"
          - "$.data[*].completed_by.gid"
          - "$.data[*].hearts[*].user.gid"
          - "$.data[*].likes[*].user.gid"
          - "$.data[*].assignee.gid"
          - "$.data[*].custom_fields[*].created_by.gid"
          - "$.data[*].custom_fields[*].people_value[*].gid"
          - "$.data[*].followers[*].gid"
          - "$.data[*]..email"
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/Task"
        errors:
          items:
            $ref: "#/definitions/Error"
        nextPage:
          $ref: "#/definitions/NextPage"
  - pathTemplate: "/api/1.0/teams/{teamId}/projects"
    allowedQueryParams:
      - "limit"
      - "offset"
      - "opt_fields"
      - "archived"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/ProjectCompact"
        errors:
          items:
            $ref: "#/definitions/Error"
        nextPage:
          $ref: "#/definitions/NextPage"
  - pathTemplate: "/api/1.0/users"
    allowedQueryParams:
      - "limit"
      - "offset"
      - "opt_fields"
      - "workspace"
      - "team"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$.data[*].email"
        encoding: "URL_SAFE_TOKEN"
      - !<pseudonymize>
        jsonPaths:
          - "$.data[*].gid"
        includeReversible: true
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/User"
        errors:
          items:
            $ref: "#/definitions/Error"
        nextPage:
          $ref: "#/definitions/NextPage"
  - pathTemplate: "/api/1.0/workspaces"
    allowedQueryParams:
      - "limit"
      - "offset"
      - "opt_fields"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/WorkspaceCompact"
        errors:
          items:
            $ref: "#/definitions/Error"
        nextPage:
          $ref: "#/definitions/NextPage"
  - pathTemplate: "/api/1.0/workspaces/{workspaceId}/tasks/search"
    allowedQueryParams:
      - "limit"
      - "modified_at.after"
      - "modified_at.before"
      - "is_subtask"
      - "sort_ascending"
      - "opt_fields"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$.data[*].created_by.gid"
          - "$.data[*].completed_by.gid"
          - "$.data[*].hearts[*].user.gid"
          - "$.data[*].likes[*].user.gid"
          - "$.data[*].assignee.gid"
          - "$.data[*].custom_fields[*].created_by.gid"
          - "$.data[*].custom_fields[*].people_value[*].gid"
          - "$.data[*].followers[*].gid"
          - "$.data[*]..email"
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/Task"
        errors:
          items:
            $ref: "#/definitions/Error"
  - pathTemplate: "/api/1.0/workspaces/{workspaceId}/teams"
    allowedQueryParams:
      - "limit"
      - "offset"
      - "opt_fields"
    responseSchema:
      properties:
        data:
          items:
            $ref: "#/definitions/TeamCompact"
        errors:
          items:
            $ref: "#/definitions/Error"
        nextPage:
          $ref: "#/definitions/NextPage"
definitions:
  CustomField:
    properties:
      asanaCreatedField: {}
      createdBy:
        $ref: "#/definitions/User"
      currencyCode: {}
      customLabel: {}
      customLabelPosition: {}
      dateValue:
        $ref: "#/definitions/CustomFieldDate"
      displayValue: {}
      enabled: {}
      enumOptions:
        items:
          $ref: "#/definitions/EnumObject"
      enumValue:
        $ref: "#/definitions/EnumObject"
      format: {}
      gid: {}
      hasNotificationsEnabled: {}
      isGlobalToWorkspace: {}
      multiEnumValues:
        items:
          $ref: "#/definitions/EnumObject"
      numberValue: {}
      peopleValue:
        items:
          $ref: "#/definitions/Resource"
      precision: {}
      resourceSubtype: {}
      resourceType: {}
      textValue: {}
      type: {}
  CustomFieldDate:
    properties:
      date:
        format: "date"
      dateTime: {}
  EnumObject:
    properties:
      enabled: {}
      gid: {}
      resourceType: {}
  Error:
    properties:
      message: {}
      phrase: {}
  Membership:
    properties:
      project:
        $ref: "#/definitions/Resource"
      section:
        $ref: "#/definitions/Resource"
  NextPage:
    properties:
      offset: {}
      path: {}
      uri: {}
  ProjectCompact:
    properties:
      gid: {}
      resourceType: {}
  Resource:
    properties:
      gid: {}
      resourceType: {}
  ResourceWithSubtype:
    properties:
      gid: {}
      resourceSubtype: {}
      resourceType: {}
  Story:
    properties:
      assignee:
        $ref: "#/definitions/User"
      createdAt:
        format: "date-time"
      createdBy:
        $ref: "#/definitions/User"
      customField:
        $ref: "#/definitions/CustomField"
      dependency:
        $ref: "#/definitions/ResourceWithSubtype"
      duplicateOf:
        $ref: "#/definitions/ResourceWithSubtype"
      duplicatedFrom:
        $ref: "#/definitions/ResourceWithSubtype"
      follower:
        $ref: "#/definitions/User"
      gid: {}
      isEditable: {}
      isEdited: {}
      isPinned: {}
      likes:
        items:
          $ref: "#/definitions/UserInteraction"
      newApprovalStatus: {}
      newDates:
        $ref: "#/definitions/StoryDate"
      newEnumValue:
        $ref: "#/definitions/EnumObject"
      newMultiEnumValues:
        items:
          $ref: "#/definitions/EnumObject"
      newNumberValue: {}
      newPeopleValue:
        $ref: "#/definitions/Resource"
      newResourceSubtype: {}
      newSection:
        $ref: "#/definitions/Resource"
      numHearts: {}
      numLikes: {}
      oldApprovalStatus: {}
      oldDates:
        $ref: "#/definitions/StoryDate"
      oldEnumValue:
        $ref: "#/definitions/EnumObject"
      oldMultiEnumValues:
        items:
          $ref: "#/definitions/EnumObject"
      oldNumberValue: {}
      oldPeopleValue:
        $ref: "#/definitions/Resource"
      oldResourceSubtype: {}
      oldSection:
        $ref: "#/definitions/Resource"
      project:
        $ref: "#/definitions/ProjectCompact"
      resourceSubtype: {}
      resourceType: {}
      source: {}
      stickerName: {}
      story:
        $ref: "#/definitions/StoryCompact"
      tag:
        $ref: "#/definitions/TagCompact"
      target:
        $ref: "#/definitions/Task"
      task:
        $ref: "#/definitions/Task"
      type: {}
  StoryCompact:
    properties:
      createdAt:
        format: "date-time"
      createdBy:
        $ref: "#/definitions/User"
      gid: {}
      resourceSubtype: {}
      resourceType: {}
  StoryDate:
    properties:
      dueAt:
        format: "date-time"
      dueOn:
        format: "date"
      startOn:
        format: "date"
  TagCompact:
    properties:
      gid: {}
      resourceType: {}
  Task:
    properties:
      actualTimeMinutes: {}
      approvalStatus: {}
      assignee:
        $ref: "#/definitions/User"
      assigneeSection:
        $ref: "#/definitions/Resource"
      assigneeStatus: {}
      completed: {}
      completedAt:
        format: "date-time"
      completedBy:
        $ref: "#/definitions/User"
      createdAt:
        format: "date-time"
      createdBy:
        $ref: "#/definitions/User"
      customFields:
        items:
          $ref: "#/definitions/CustomField"
      dependencies:
        items:
          $ref: "#/definitions/Resource"
      dependents:
        items:
          $ref: "#/definitions/Resource"
      dueAt:
        format: "date-time"
      dueOn:
        format: "date"
      followers:
        items:
          $ref: "#/definitions/User"
      gid: {}
      isRenderedAsSeparator: {}
      liked: {}
      likes:
        items:
          $ref: "#/definitions/UserInteraction"
      memberships:
        items:
          $ref: "#/definitions/Membership"
      modifiedAt:
        format: "date-time"
      numHearts: {}
      numLikes: {}
      numSubtasks: {}
      parent:
        $ref: "#/definitions/Task"
      permalinkUrl: {}
      projects:
        items:
          $ref: "#/definitions/ProjectCompact"
      resourceSubtype: {}
      resourceType: {}
      startAt:
        format: "date-time"
      startOn:
        format: "date"
      tags:
        items:
          $ref: "#/definitions/TagCompact"
      workspace:
        $ref: "#/definitions/WorkspaceCompact"
  TeamCompact:
    properties:
      gid: {}
      resourceType: {}
  User:
    properties:
      email: {}
      gid: {}
      resourceType: {}
  UserInteraction:
    properties:
      gid: {}
      user:
        $ref: "#/definitions/User"
  WorkspaceCompact:
    properties:
      gid: {}
      resourceType: {}
