---
endpoints:
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/sobjects/(Account|ActivityHistory|User)/describe$"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/sobjects/(Account|ActivityHistory)/updated[?][^/]*"
    allowedQueryParams:
      - "start"
      - "end"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/composite/sobjects/Account[?][^/]*"
    allowedQueryParams:
      - "ids"
      - "fields"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..attributes"
      - !<pseudonymize>
        jsonPaths:
          - "$..CreatedById"
          - "$..LastModifiedById"
          - "$..OwnerId"
        encoding: "JSON"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/composite/sobjects/User[?][^/]*"
    allowedQueryParams:
      - "ids"
      - "fields"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..attributes"
      - !<redact>
        jsonPaths:
          - "$..Alias"
          - "$..Email"
          - "$..Name"
          - "$..Username"
      - !<pseudonymize>
        jsonPaths:
          - "$..ContactId"
          - "$..CreatedById"
          - "$..ManagerId"
          - "$..Id"
        encoding: "JSON"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT(%20|\\+)Id(%20|\\+)FROM(%20|\\\
    +)User.*$"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..records[*].attributes"
      - !<pseudonymize>
        jsonPaths:
          - "$..records[*].Id"
        includeReversible: true
        encoding: "URL_SAFE_TOKEN"
    responseSchema:
      type: "object"
      properties:
        totalSize:
          type: "integer"
        done:
          type: "boolean"
        nextRecordsUrl:
          type: "string"
        records:
          type: "array"
          items:
            type: "object"
            properties:
              Id:
                type: "string"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT(%20|\\+)Id(%20|\\+)FROM(%20|\\\
    +)Account.*$"
    responseSchema:
      type: "object"
      properties:
        totalSize:
          type: "integer"
        done:
          type: "boolean"
        nextRecordsUrl:
          type: "string"
        records:
          type: "array"
          items:
            type: "object"
            properties:
              Id:
                type: "string"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT.*FROM(%20|\\+)User(%20|\\\
    +)WHERE(%20|\\+)LastModifiedDate.*$"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..Alias"
          - "$..Email"
          - "$..Name"
          - "$..Username"
      - !<pseudonymize>
        jsonPaths:
          - "$..ContactId"
          - "$..CreatedById"
          - "$..ManagerId"
          - "$..Id"
        encoding: "JSON"
    responseSchema:
      type: "object"
      properties:
        totalSize:
          type: "integer"
        done:
          type: "boolean"
        nextRecordsUrl:
          type: "string"
        records:
          type: "array"
          items:
            type: "object"
            properties:
              Alias:
                type: "string"
              AccountId:
                type: "string"
              ContactId:
                type: "string"
              CreatedDate:
                type: "string"
              CreatedById:
                type: "string"
              Email:
                type: "string"
              EmailEncodingKey:
                type: "string"
              Id:
                type: "string"
              IsActive:
                type: "boolean"
              LastLoginDate:
                type: "string"
              LastModifiedDate:
                type: "string"
              ManagerId:
                type: "string"
              Name:
                type: "string"
              TimeZoneSidKey:
                type: "string"
              Username:
                type: "string"
              UserRoleId:
                type: "string"
              UserType:
                type: "string"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT.*FROM(%20|\\+)Account(%20|\\\
    +)WHERE(%20|\\+)LastModifiedDate.*$"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$..CreatedById"
          - "$..LastModifiedById"
          - "$..OwnerId"
        encoding: "JSON"
    responseSchema:
      type: "object"
      properties:
        totalSize:
          type: "integer"
        done:
          type: "boolean"
        nextRecordsUrl:
          type: "string"
        records:
          type: "array"
          items:
            type: "object"
            properties:
              Id:
                type: "string"
              AnnualRevenue:
                type: "number"
              CreatedDate:
                type: "string"
              CreatedById:
                type: "string"
              IsDeleted:
                type: "string"
              LastActivityDate:
                type: "string"
              LastModifiedDate:
                type: "string"
              LastModifiedById:
                type: "string"
              NumberOfEmployees:
                type: "integer"
              OwnerId:
                type: "string"
              Ownership:
                type: "string"
              ParentId:
                type: "string"
              Rating:
                type: "string"
              Sic:
                type: "string"
              Type:
                type: "string"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT.*FROM(%20|\\+)ActivityHistories.*$"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$..records[*].ActivityHistories.records[*].CreatedById"
          - "$..records[*].ActivityHistories.records[*].LastModifiedById"
          - "$..records[*].ActivityHistories.records[*].OwnerId"
          - "$..records[*].ActivityHistories.records[*].WhoId"
        encoding: "JSON"
    responseSchema:
      type: "object"
      properties:
        totalSize:
          type: "integer"
        done:
          type: "boolean"
        nextRecordsUrl:
          type: "string"
        records:
          type: "array"
          items:
            type: "object"
            properties:
              ActivityHistories:
                type: "object"
                properties:
                  totalSize:
                    type: "integer"
                  done:
                    type: "boolean"
                  nextRecordsUrl:
                    type: "string"
                  records:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        AccountId:
                          type: "string"
                        ActivityDate:
                          type: "string"
                        ActivityDateTime:
                          type: "string"
                        ActivitySubtype:
                          type: "string"
                        ActivityType:
                          type: "string"
                        CallDurationInSeconds:
                          type: "integer"
                        CallType:
                          type: "string"
                        CreatedDate:
                          type: "string"
                        CreatedById:
                          type: "string"
                        DurationInMinutes:
                          type: "integer"
                        EndDateTime:
                          type: "string"
                        Id:
                          type: "string"
                        IsAllDayEvent:
                          type: "boolean"
                        IsDeleted:
                          type: "boolean"
                        IsHighPriority:
                          type: "boolean"
                        IsTask:
                          type: "boolean"
                        LastModifiedDate:
                          type: "string"
                        LastModifiedById:
                          type: "string"
                        OwnerId:
                          type: "string"
                        Priority:
                          type: "string"
                        StartDateTime:
                          type: "string"
                        Status:
                          type: "string"
                        WhatId:
                          type: "string"
                        WhoId:
                          type: "string"