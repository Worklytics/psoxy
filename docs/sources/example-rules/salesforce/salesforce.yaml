---
endpoints:
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/sobjects/(Account|ActivityHistory|User)/describe$"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/sobjects/(Account|ActivityHistory)/updated[?][^/]*"
    allowedQueryParams:
      - "start"
      - "end"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/composite/sobjects/Account[?][^/]*"
    allowedQueryParams:
      - "ids"
      - "fields"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..attributes"
      - !<pseudonymize>
        jsonPaths:
          - "$..CreatedById"
          - "$..LastModifiedById"
          - "$..OwnerId"
        encoding: "JSON"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/composite/sobjects/User[?][^/]*"
    allowedQueryParams:
      - "ids"
      - "fields"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..attributes"
      - !<redact>
        jsonPaths:
          - "$..Alias"
          - "$..Email"
          - "$..Name"
          - "$..Username"
      - !<pseudonymize>
        jsonPaths:
          - "$..ContactId"
          - "$..CreatedById"
          - "$..ManagerId"
          - "$..Id"
        encoding: "JSON"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/composite/sobjects/User[?]id=(/p~[a-zA-Z0-9_-])[^/]*"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..attributes"
      - !<redact>
        jsonPaths:
          - "$..Alias"
          - "$..Email"
          - "$..Name"
          - "$..Username"
      - !<pseudonymize>
        jsonPaths:
          - "$..ContactId"
          - "$..CreatedById"
          - "$..ManagerId"
          - "$..Id"
        encoding: "JSON"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT%20Id%20FROM%20User.*$"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..records[*].attributes"
      - !<pseudonymize>
        jsonPaths:
          - "$..records[*].Id"
        includeReversible: true
        encoding: "URL_SAFE_TOKEN"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT\\+Id\\+FROM\\+User.*$"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..records[*].attributes"
      - !<pseudonymize>
        jsonPaths:
          - "$..records[*].Id"
        includeReversible: true
        encoding: "URL_SAFE_TOKEN"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT.*FROM%20ActivityHistories.*$"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$..records[*].ActivityHistories.records[*].CreatedById"
          - "$..records[*].ActivityHistories.records[*].LastModifiedById"
          - "$..records[*].ActivityHistories.records[*].OwnerId"
          - "$..records[*].ActivityHistories.records[*].WhoId"
        encoding: "JSON"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT.*FROM\\+ActivityHistories.*$"
    transforms:
      - !<pseudonymize>
        jsonPaths:
          - "$..records[*].ActivityHistories.records[*].CreatedById"
          - "$..records[*].ActivityHistories.records[*].LastModifiedById"
          - "$..records[*].ActivityHistories.records[*].OwnerId"
          - "$..records[*].ActivityHistories.records[*].WhoId"
        encoding: "JSON"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT%20Id%20FROM%20Account.*$"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..attributes"
  - pathRegex: "^/services/data/v(\\d*.\\d{1})/query[?]q=SELECT\\+Id\\+FROM\\+Account.*$"
    transforms:
      - !<redact>
        jsonPaths:
          - "$..attributes"